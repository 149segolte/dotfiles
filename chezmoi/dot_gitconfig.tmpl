{{- with ((includeTemplate "coalesce_data.yaml.tmpl" .) | fromYaml) -}}
{{- $ := . -}}

[init]
    defaultBranch = main
[gpg]
    format = ssh
[gpg "ssh"]
    allowedSignersFile = {{ joinPath .chezmoi.homeDir ".ssh" "git_allowed_signers" }}
[commit]
    gpgsign = true
[tag]
    gpgSign = true
[user]
    name = {{ .data.metadata.github.user }}
    email = {{ .data.metadata.github.email }}
    signingkey = {{ joinPath .chezmoi.homeDir ".ssh" "id_ed25519_sk.pub" }} {{- "\n" -}}

{{- end -}}
